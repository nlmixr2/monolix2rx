<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>monolix2rx Converts Monolix Models to rxode2 • monolix2rx</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="monolix2rx Converts Monolix Models to rxode2">
<meta name="description" content="Monolix is a tool for running mixed effects model using saem. This tool allows you to convert Monolix models to rxode2 (Wang, Hallow and James (2016) &lt;doi:10.1002/psp4.12052&gt;) using the form compatible with nlmixr2 (Fidler et al (2019) &lt;doi:10.1002/psp4.12445&gt;). The nlmixr2 syntax requires the residual specification to be included and it is not always translated. If available, the rxode2 model will read in the Monolix data and compare the simulation for the population model individual model and residual model to immediately show how well the translation is performing. This saves the model development time for people who are creating an rxode2 model manually. Additionally, this package reads in all the information to allow simulation with uncertainty (that is the number of observations, the number of subjects, and the covariance matrix) with a rxode2 model. This is complementary to the babelmixr2 package that translates nlmixr2 models to NONMEM and can convert the objects converted from monolix2rx to a full nlmixr2 fit. While not required, you can get/install the lixoftConnectors package in the Monolix installation, as described at the following url &lt;https://monolix.lixoft.com/monolix-api/lixoftconnectors_installation/&gt;. When lixoftConnectors is available, Monolix can be used to load its model library instead manually setting up text files (which only works with old versions of Monolix). command line usage.">
<meta property="og:description" content="Monolix is a tool for running mixed effects model using saem. This tool allows you to convert Monolix models to rxode2 (Wang, Hallow and James (2016) &lt;doi:10.1002/psp4.12052&gt;) using the form compatible with nlmixr2 (Fidler et al (2019) &lt;doi:10.1002/psp4.12445&gt;). The nlmixr2 syntax requires the residual specification to be included and it is not always translated. If available, the rxode2 model will read in the Monolix data and compare the simulation for the population model individual model and residual model to immediately show how well the translation is performing. This saves the model development time for people who are creating an rxode2 model manually. Additionally, this package reads in all the information to allow simulation with uncertainty (that is the number of observations, the number of subjects, and the covariance matrix) with a rxode2 model. This is complementary to the babelmixr2 package that translates nlmixr2 models to NONMEM and can convert the objects converted from monolix2rx to a full nlmixr2 fit. While not required, you can get/install the lixoftConnectors package in the Monolix installation, as described at the following url &lt;https://monolix.lixoft.com/monolix-api/lixoftconnectors_installation/&gt;. When lixoftConnectors is available, Monolix can be used to load its model library instead manually setting up text files (which only works with old versions of Monolix). command line usage.">
<meta property="og:image" content="/logo.png">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">monolix2rx</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="articles/convert-nlmixr2.html"><span class="fa fa-arrow-right"></span> Converting</a></li>
<li class="nav-item"><a class="nav-link" href="articles/rxode2-validate.html"><span class="fa fa-check"></span> Qualify</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-simulation" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true"><span class="fa fa-dice"></span> Simulation</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-simulation">
<li><a class="dropdown-item" href="articles/simulate-new-dosing.html">New Dosing Scenarios</a></li>
    <li><a class="dropdown-item" href="articles/simulate-uncertainty.html">Simulating with Uncertainty</a></li>
    <li><a class="dropdown-item" href="articles/simulate-extra-items.html">Simulating with Derived Variables</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-reporting" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Reporting</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-reporting">
<li><a class="dropdown-item" href="articles/create-office.html">Creating word and powerpoint documents</a></li>
    <li><a class="dropdown-item" href="articles/create-vpc.html">Easily create VPC plots</a></li>
    <li><a class="dropdown-item" href="articles/create-augPred.html">Create enriched Individual plots</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="reference/index.html"><span class="fa fa-file-code-o"></span> Functions</a></li>
<li class="nav-item"><a class="nav-link" href="news/index.html"><span class="fa fas fa-rss"></span> News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header">
<img src="logo.png" class="logo" alt=""><h1 id="monolix2rx-">monolix2rx <a class="anchor" aria-label="anchor" href="#monolix2rx-"></a>
</h1>
</div>
<!-- badges: start -->

<p>The goal of monolix2rx is to convert <code>Monolix</code> to <code>rxode2</code> to use for simulation and sharing the model in an open-source framework.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of monolix2rx from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"nlmixr2/monolix2rx"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>If you are trying to convert a Monolix to a rxode2 model you simply need the path to the <code>mlxtran</code> file. For example, the classic demo of theophylline is included in <code>monolix2rx</code> and can be imported below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">monolix2rx</span><span class="op">)</span></span>
<span><span class="co"># First load in the model; in this case the theo model</span></span>
<span><span class="co"># This is modified from the Monolix demos by saving the model</span></span>
<span><span class="co"># file as a text file (hence you can access without model library).</span></span>
<span><span class="co"># Additionally some of the file paths were shortened so they could</span></span>
<span><span class="co"># be included with monolix2rx</span></span>
<span></span>
<span><span class="va">pkgTheo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"theo"</span>, package<span class="op">=</span><span class="st">"monolix2rx"</span><span class="op">)</span></span>
<span><span class="va">mlxtranFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">pkgTheo</span>, <span class="st">"theophylline_project.mlxtran"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rx</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/monolix2rx.html">monolix2rx</a></span><span class="op">(</span><span class="va">mlxtranFile</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ updating model values to final parameter estimates</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span><span class="co">#&gt; ℹ reading run info (# obs, doses, Monolix Version, etc) from summary.txt</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span><span class="co">#&gt; ℹ reading covariance from FisherInformation/covarianceEstimatesLin.txt</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span><span class="co">#&gt; ℹ imported monolix and translated to rxode2 compatible data ($monolixData)</span></span>
<span><span class="co">#&gt; ℹ imported monolix ETAS (_SAEM) imported to rxode2 compatible data ($etaData)</span></span>
<span><span class="co">#&gt; ℹ imported monolix pred/ipred data to compare ($predIpredData)</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; ℹ solving ipred problem</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span><span class="co">#&gt; ℹ solving pred problem</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span></span>
<span><span class="va">rx</span></span>
<span><span class="co">#&gt;  ── rxode2-based free-form 2-cmt ODE model ────────────────────────────────────── </span></span>
<span><span class="co">#&gt;  ── Initalization: ──  </span></span>
<span><span class="co">#&gt; Fixed Effects ($theta): </span></span>
<span><span class="co">#&gt;      ka_pop       V_pop      Cl_pop           a           b </span></span>
<span><span class="co">#&gt;  0.42699448 -0.78635157 -3.21457598  0.43327956  0.05425953 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Omega ($omega): </span></span>
<span><span class="co">#&gt;           omega_ka    omega_V   omega_Cl</span></span>
<span><span class="co">#&gt; omega_ka 0.4503145 0.00000000 0.00000000</span></span>
<span><span class="co">#&gt; omega_V  0.0000000 0.01594701 0.00000000</span></span>
<span><span class="co">#&gt; omega_Cl 0.0000000 0.00000000 0.07323701</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; States ($state or $stateDf): </span></span>
<span><span class="co">#&gt;   Compartment Number Compartment Name</span></span>
<span><span class="co">#&gt; 1                  1            depot</span></span>
<span><span class="co">#&gt; 2                  2          central</span></span>
<span><span class="co">#&gt;  ── μ-referencing ($muRefTable): ──  </span></span>
<span><span class="co">#&gt;    theta      eta level</span></span>
<span><span class="co">#&gt; 1 ka_pop omega_ka    id</span></span>
<span><span class="co">#&gt; 2  V_pop  omega_V    id</span></span>
<span><span class="co">#&gt; 3 Cl_pop omega_Cl    id</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ── Model (Normalized Syntax): ── </span></span>
<span><span class="co">#&gt; function() {</span></span>
<span><span class="co">#&gt;     description &lt;- "The administration is extravascular with a first order absorption (rate constant ka).\nThe PK model has one compartment (volume V) and a linear elimination (clearance Cl).\nThis has been modified so that it will run without the model library"</span></span>
<span><span class="co">#&gt;     dfObs &lt;- 120</span></span>
<span><span class="co">#&gt;     dfSub &lt;- 12</span></span>
<span><span class="co">#&gt;     thetaMat &lt;- lotri({</span></span>
<span><span class="co">#&gt;         ka_pop + V_pop + Cl_pop ~ c(0.09785, 0.00082606, 0.00041937, </span></span>
<span><span class="co">#&gt;             -4.2833e-05, -6.7957e-06, 1.1318e-05)</span></span>
<span><span class="co">#&gt;         a + b ~ c(0.015333, -0.0026458, 0.00056232)</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;     validation &lt;- c("ipred relative difference compared to Monolix ipred: 0.04%; 95% percentile: (0%,0.52%); rtol=0.00038", </span></span>
<span><span class="co">#&gt;         "ipred absolute difference compared to Monolix ipred: 95% percentile: (0.000362, 0.00848); atol=0.00254", </span></span>
<span><span class="co">#&gt;         "pred relative difference compared to Monolix pred: 0%; 95% percentile: (0%,0%); rtol=6.6e-07", </span></span>
<span><span class="co">#&gt;         "pred absolute difference compared to Monolix pred: 95% percentile: (1.6e-07, 1.27e-05); atol=3.66e-06", </span></span>
<span><span class="co">#&gt;         "iwres relative difference compared to Monolix iwres: 0%; 95% percentile: (0.06%,32.22%); rtol=0.0153", </span></span>
<span><span class="co">#&gt;         "iwres absolute difference compared to Monolix pred: 95% percentile: (0.000403, 0.0138); atol=0.00305")</span></span>
<span><span class="co">#&gt;     ini({</span></span>
<span><span class="co">#&gt;         ka_pop &lt;- 0.426994483535611</span></span>
<span><span class="co">#&gt;         V_pop &lt;- -0.786351566327091</span></span>
<span><span class="co">#&gt;         Cl_pop &lt;- -3.21457597916301</span></span>
<span><span class="co">#&gt;         a &lt;- c(0, 0.433279557549051)</span></span>
<span><span class="co">#&gt;         b &lt;- c(0, 0.0542595276206251)</span></span>
<span><span class="co">#&gt;         omega_ka ~ 0.450314511978718</span></span>
<span><span class="co">#&gt;         omega_V ~ 0.0159470121255372</span></span>
<span><span class="co">#&gt;         omega_Cl ~ 0.0732370098834837</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;     model({</span></span>
<span><span class="co">#&gt;         cmt(depot)</span></span>
<span><span class="co">#&gt;         cmt(central)</span></span>
<span><span class="co">#&gt;         ka &lt;- exp(ka_pop + omega_ka)</span></span>
<span><span class="co">#&gt;         V &lt;- exp(V_pop + omega_V)</span></span>
<span><span class="co">#&gt;         Cl &lt;- exp(Cl_pop + omega_Cl)</span></span>
<span><span class="co">#&gt;         d/dt(depot) &lt;- -ka * depot</span></span>
<span><span class="co">#&gt;         d/dt(central) &lt;- +ka * depot - Cl/V * central</span></span>
<span><span class="co">#&gt;         Cc &lt;- central/V</span></span>
<span><span class="co">#&gt;         CONC &lt;- Cc</span></span>
<span><span class="co">#&gt;         CONC ~ add(a) + prop(b) + combined1()</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt; }</span></span>
<span></span>
<span><span class="co"># If you are only interseted in the parsing you can use `mlxtran`</span></span>
<span></span>
<span><span class="va">mlx</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mlxtran.html">mlxtran</a></span><span class="op">(</span><span class="va">mlxtranFile</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ reading run info (# obs, doses, Monolix Version, etc) from summary.txt</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span><span class="co">#&gt; ℹ reading covariance from FisherInformation/covarianceEstimatesLin.txt</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span></span>
<span><span class="va">mlx</span></span>
<span><span class="co">#&gt; DESCRIPTION:</span></span>
<span><span class="co">#&gt; The administration is extravascular with a first order absorption (rate constant ka).</span></span>
<span><span class="co">#&gt; The PK model has one compartment (volume V) and a linear elimination (clearance Cl).</span></span>
<span><span class="co">#&gt; This has been modified so that it will run without the model library</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;DATAFILE&gt;</span></span>
<span><span class="co">#&gt; [FILEINFO]</span></span>
<span><span class="co">#&gt; ; parsed: $DATAFILE$FILEINFO$FILEINFO</span></span>
<span><span class="co">#&gt; file = 'data/theophylline_data.txt'</span></span>
<span><span class="co">#&gt; delimiter = tab</span></span>
<span><span class="co">#&gt; header = {ID, AMT, TIME, CONC, WEIGHT, SEX}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [CONTENT]</span></span>
<span><span class="co">#&gt; ; parsed: $DATAFILE$CONTENT$CONTENT</span></span>
<span><span class="co">#&gt; ID = {use=identifier}</span></span>
<span><span class="co">#&gt; TIME = {use=time}</span></span>
<span><span class="co">#&gt; AMT = {use=amount}</span></span>
<span><span class="co">#&gt; CONC = {use=observation, name=CONC, type=continuous}</span></span>
<span><span class="co">#&gt; WEIGHT = {use=covariate, type=continuous}</span></span>
<span><span class="co">#&gt; SEX = {use=covariate, type=categorical}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;MODEL&gt;</span></span>
<span><span class="co">#&gt; [INDIVIDUAL]</span></span>
<span><span class="co">#&gt; ; parsed: $MODEL$INDIVIDUAL$INDIVIDUAL</span></span>
<span><span class="co">#&gt; input = {ka_pop, omega_ka, V_pop, omega_V, Cl_pop, omega_Cl}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; DEFINITION:</span></span>
<span><span class="co">#&gt; ; parsed: $MODEL$INDIVIDUAL$DEFINITION</span></span>
<span><span class="co">#&gt; ka = {distribution=lognormal, typical=ka_pop, sd=omega_ka}</span></span>
<span><span class="co">#&gt; V = {distribution=lognormal, typical=V_pop, sd=omega_V}</span></span>
<span><span class="co">#&gt; Cl = {distribution=lognormal, typical=Cl_pop, sd=omega_Cl}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [LONGITUDINAL]</span></span>
<span><span class="co">#&gt; ; parsed: $MODEL$LONGITUDINAL$LONGITUDINAL</span></span>
<span><span class="co">#&gt; input = {a, b, ka, V, Cl}</span></span>
<span><span class="co">#&gt; file = 'oral1_1cpt_kaVCl.txt'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; DEFINITION:</span></span>
<span><span class="co">#&gt; ; parsed: $MODEL$LONGITUDINAL$DEFINITION</span></span>
<span><span class="co">#&gt; CONC = {distribution=normal, prediction=Cc, errorModel=combined1(a, b)}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; EQUATION:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ; PK model definition</span></span>
<span><span class="co">#&gt; Cc = pkmodel(ka, V, Cl)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; OUTPUT:</span></span>
<span><span class="co">#&gt; ; parsed: $MODEL$LONGITUDINAL$OUTPUT</span></span>
<span><span class="co">#&gt; output = Cc</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;FIT&gt;</span></span>
<span><span class="co">#&gt; ; parsed: $FIT$FIT</span></span>
<span><span class="co">#&gt; data = {CONC}</span></span>
<span><span class="co">#&gt; model = {CONC}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;PARAMETER&gt;</span></span>
<span><span class="co">#&gt; ; parsed: $PARAMETER$PARAMETER</span></span>
<span><span class="co">#&gt; Cl_pop = {value=0.1, method=MLE}</span></span>
<span><span class="co">#&gt; V_pop = {value=0.5, method=MLE}</span></span>
<span><span class="co">#&gt; a = {value=1, method=MLE}</span></span>
<span><span class="co">#&gt; b = {value=0.3, method=MLE}</span></span>
<span><span class="co">#&gt; ka_pop = {value=1, method=MLE}</span></span>
<span><span class="co">#&gt; omega_Cl = {value=1, method=MLE}</span></span>
<span><span class="co">#&gt; omega_V = {value=1, method=MLE}</span></span>
<span><span class="co">#&gt; omega_ka = {value=1, method=MLE}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;MONOLIX&gt;</span></span>
<span><span class="co">#&gt; [TASKS]</span></span>
<span><span class="co">#&gt; ; parsed: $MONOLIX$TASKS$TASKS</span></span>
<span><span class="co">#&gt; populationParameters()</span></span>
<span><span class="co">#&gt; individualParameters(method = {conditionalMean, conditionalMode})</span></span>
<span><span class="co">#&gt; fim(method = Linearization)</span></span>
<span><span class="co">#&gt; logLikelihood(method = Linearization)</span></span>
<span><span class="co">#&gt; plotResult(method = {indfits, obspred, vpc, residualsscatter, residualsdistribution, parameterdistribution, covariatemodeldiagnosis, randomeffects, covariancemodeldiagnosis, saemresults})</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [SETTINGS]</span></span>
<span><span class="co">#&gt; GLOBAL:</span></span>
<span><span class="co">#&gt; ; parsed: $MONOLIX$SETTINGS$GLOBAL</span></span>
<span><span class="co">#&gt; exportpath = 'tp'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ; unparsed sections:</span></span>
<span><span class="co">#&gt; ;  $MODEL$LONGITUDINAL$EQUATION</span></span>
<span></span>
<span><span class="co"># this can be converted to a list</span></span>
<span><span class="va">mlx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">mlx</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mlx</span><span class="op">$</span><span class="va">DATAFILE</span><span class="op">$</span><span class="va">FILEINFO</span><span class="op">$</span><span class="va">FILEINFO</span></span>
<span><span class="co">#&gt; $file</span></span>
<span><span class="co">#&gt; [1] "data/theophylline_data.txt"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $header</span></span>
<span><span class="co">#&gt; [1] "ID"     "AMT"    "TIME"   "CONC"   "WEIGHT" "SEX"   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $delimiter</span></span>
<span><span class="co">#&gt; [1] "tab"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="translating-models-from-the-monolix-model-library">Translating models from the Monolix model library<a class="anchor" aria-label="anchor" href="#translating-models-from-the-monolix-model-library"></a>
</h2>
<p>For models using Monolix’s model library, the models may not be accessible as text files in all versions of Monolix. In the <code>mlxtran</code> files you may see something like:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>lib<span class="sc">:</span>bolus_1cpt_TlagVCl.txt</span></code></pre></div>
<p>For older versions of Monolix, the model libraries are a group of text files. You can find it by looking for a file in the Monolix library like <code>bolus_1cpt_TlagVCl.txt</code>. In this case it would be in <code>pk/bolus_1cpt_TlagVCl.txt</code>. The parent directory would be the model library. If you have access to these files (even if they are from an old version of Monolix) you can make <code>monolix2rx</code> aware of the model library by using:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If the model library was located in ~/src/monolix/library</span></span>
<span><span class="co"># Then you would set the model library up as follows:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>monolix2rx.library<span class="op">=</span><span class="st">"~/src/monolix/library/"</span><span class="op">)</span></span></code></pre></div>
<p>In Unix, this can be a symbolic link to whatever model library you would like to use.</p>
<p>You can check to see if it works by trying to translate the model file to <code>rxode2</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/monolix2rx.html">monolix2rx</a></span><span class="op">(</span><span class="st">"lib:bolus_1cpt_TlagVCl.txt"</span><span class="op">)</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; ℹ cannot find individual parameter estimates</span></span>
<span><span class="co">#&gt;  ── rxode2-based free-form 1-cmt ODE model ────────────────────────────────────── </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; States ($state or $stateDf): </span></span>
<span><span class="co">#&gt;   Compartment Number Compartment Name</span></span>
<span><span class="co">#&gt; 1                  1          central</span></span>
<span><span class="co">#&gt;  ── Model (Normalized Syntax): ── </span></span>
<span><span class="co">#&gt; function() {</span></span>
<span><span class="co">#&gt;     description &lt;- "The administration is via a bolus with a lag time (Tlag).\nThe PK model has one compartment (volume V) and a linear elimination (clearance Cl)."</span></span>
<span><span class="co">#&gt;     model({</span></span>
<span><span class="co">#&gt;         cmt(central)</span></span>
<span><span class="co">#&gt;         d/dt(central) &lt;- -Cl/V * central</span></span>
<span><span class="co">#&gt;         alag(central) &lt;- Tlag</span></span>
<span><span class="co">#&gt;         Cc &lt;- central/V</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>If you computer is setup correctly (like above) you will see the translated model. Note since it isn’t a <code>mlxtran</code> file the relationship between population parameters, between subject variability etc and initial parameter estimates are not in the model.</p>
<p>If the model library is not setup correctly you will see or cannot be found in an old model library you get:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="reference/monolix2rx.html">monolix2rx</a></span><span class="op">(</span><span class="st">"lib:notThere.txt"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in .mlxtranLib(file): while options('monolix2rx.library') is set, could not find model file 'lib:notThere.txt'</span></span>
<span><span class="co">#&gt; please save the model to translate</span></span>
<span><span class="co">#&gt; Error : could not find the model file</span></span></code></pre></div>
<p>In newer versions of Monolix, the model library was turned into a binary database that is accessed by the GUI and <code>lixoftConnectors</code>. If you have <code>lixoftConnectors</code> on your system and it can successfully load the model with <code>lixoftConnectors::getLibraryModelContent()</code> then <code>monolix2rx</code> will also load the model correctly (and will use this version over the text files when both are setup)</p>
<p>This means you will need to import models into <code>rxode2</code> you need to:</p>
<ul>
<li>
<p>For a model built from the model library you will need:</p>
<ul>
<li><p>have a path to the text file Monolix Library and setup the <code>monolix2rx.library</code> with <code>options(monolix2rx.library="~/src/monolix/library/")</code></p></li>
<li><p>have <code>lixoftConnectors</code> installed and connected to a newer (and licensed) version of Monolix that can get the model library content by <code>lixoftConnectors::getLibraryModelContent()</code></p></li>
<li><p>or without these options, you will need to save the model to a text file outside of the model library so you can import the model.</p></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="section level1">
<h1 id="note-on-testing">Note on testing<a class="anchor" aria-label="anchor" href="#note-on-testing"></a>
</h1>
<p>The tests in this package include testing the <code>Monolix</code> demo files, the <code>Monolix</code> library files (if available), and Monolix validation suite.</p>
<p>Since these are a part of Monolix itself, they are not included in this package. You can setup <code>monolix2rx</code> to run tests on all of these files as well by setting up some options:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># setup monolix library (and will test that the parsing and translation are as expected)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>monolix2rx.library<span class="op">=</span><span class="st">"~/src/monolix/library/"</span><span class="op">)</span></span>
<span><span class="co"># setup monolix demos to be tested</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>monolix2rx.demo<span class="op">=</span><span class="st">"~/src/monolix/demos/"</span><span class="op">)</span></span></code></pre></div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing monolix2rx</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Matthew Fidler <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8538-6691" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/nlmixr2/monolix2rx/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/nlmixr2/monolix2rx/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/nlmixr2/monolix2rx?branch=main" class="external-link"><img src="https://codecov.io/gh/nlmixr2/monolix2rx/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cran.r-project.org/package=monolix2rx" class="external-link"><img src="http://www.r-pkg.org/badges/version/monolix2rx" alt="CRAN version"></a></li>
<li><a href="https://cran.r-project.org/package=monolix2rx" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/monolix2rx" alt="CRAN total downloads"></a></li>
<li><a href="https://cran.r-project.org/package=monolix2rx" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/monolix2rx" alt="CRAN total downloads"></a></li>
<li><a href="https://www.codefactor.io/repository/github/nlmixr2/monolix2rx" class="external-link"><img src="https://www.codefactor.io/repository/github/nlmixr2/monolix2rx/badge" alt="CodeFactor"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Matthew Fidler.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
