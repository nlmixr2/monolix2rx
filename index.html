<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>monolix2rx Converts Monolix Models to rxode2 • monolix2rx</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="monolix2rx Converts Monolix Models to rxode2">
<meta property="og:description" content="Monolix is a tool for running mixed effects model using saem. This tool allows you to convert Monolix models to rxode2 (Wang, Hallow and James (2016) &lt;doi:10.1002/psp4.12052&gt;) using the form compatible with nlmixr2 (Fidler et al (2019) &lt;doi:10.1002/psp4.12445&gt;). The nlmixr2 syntax requires the residual specification to be included and it is not always translated. If available, the rxode2 model will read in the Monolix data and compare the simulation for the population model individual model and residual model to immediately show how well the translation is performing. This saves the model development time for people who are creating an rxode2 model manually. Additionally, this package reads in all the information to allow simulation with uncertainty (that is the number of observations, the number of subjects, and the covariance matrix) with a rxode2 model. This is complementary to the babelmixr2 package that translates nlmixr2 models to NONMEM and can convert the objects converted from monolix2rx to a full nlmixr2 fit.">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">monolix2rx</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">

<div class="section level1">
<div class="page-header"><h1 id="monolix2rx-">monolix2rx <img src="reference/figures/logo.png" align="right" height="138" alt=""><a class="anchor" aria-label="anchor" href="#monolix2rx-"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of monolix2rx is to convert <code>Monolix</code> to <code>rxode2</code> to use for simulation and sharing the model in an open-source framework.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of monolix2rx from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"nlmixr2/monolix2rx"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p>If you are trying to convert a Monolix to a rxode2 model you simply need the path to the <code>mlxtran</code> file. For example, the classic demo of theophylline is included in <code>monolix2rx</code> and can be imported below:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">monolix2rx</span><span class="op">)</span></span>
<span><span class="co">#&gt; Loading required namespace: rxode2</span></span>
<span><span class="co"># First load in the model; in this case the theo model</span></span>
<span><span class="co"># This is modified from the Monolix demos by saving the model</span></span>
<span><span class="co"># file as a text file (hence you can access without model library).</span></span>
<span><span class="co"># Additionally some of the file paths were shortened so they could</span></span>
<span><span class="co"># be included with monolix2rx</span></span>
<span></span>
<span><span class="va">pkgTheo</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"theo"</span>, package<span class="op">=</span><span class="st">"monolix2rx"</span><span class="op">)</span></span>
<span><span class="va">mlxtranFile</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">pkgTheo</span>, <span class="st">"theophylline_project.mlxtran"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">rx</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/monolix2rx.html">monolix2rx</a></span><span class="op">(</span><span class="va">mlxtranFile</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ updating model values to final parameter estimates</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span><span class="co">#&gt; ℹ reading run info (# obs, doses, Monolix Version, etc) from summary.txt</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span><span class="co">#&gt; ℹ reading covariance from FisherInformation/covarianceEstimatesLin.txt</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span><span class="co">#&gt; ℹ imported monolix and translated to rxode2 compatible data ($monolixData)</span></span>
<span><span class="co">#&gt; ℹ imported monolix ETAS (_SAEM) imported to rxode2 compatible data ($etaData)</span></span>
<span><span class="co">#&gt; ℹ imported monolix pred/ipred data to compare ($predIpredData)</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; In file included from /usr/share/R/include/R.h:71,</span></span>
<span><span class="co">#&gt;                  from /home/matt/R/x86_64-pc-linux-gnu-library/4.4/rxode2parse/include/rxode2parse.h:33,</span></span>
<span><span class="co">#&gt;                  from /home/matt/R/x86_64-pc-linux-gnu-library/4.4/rxode2/include/rxode2.h:9,</span></span>
<span><span class="co">#&gt;                  from /home/matt/R/x86_64-pc-linux-gnu-library/4.4/rxode2parse/include/rxode2_model_shared.h:3,</span></span>
<span><span class="co">#&gt;                  from rx_3eaac9dbb7c8e82fd82febcc413da174_.c:117:</span></span>
<span><span class="co">#&gt; /usr/share/R/include/R_ext/Complex.h:80:6: warning: ISO C99 doesn’t support unnamed structs/unions [-Wpedantic]</span></span>
<span><span class="co">#&gt;    80 |     };</span></span>
<span><span class="co">#&gt;       |      ^</span></span>
<span><span class="co">#&gt; ℹ solving ipred problem</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span><span class="co">#&gt; ℹ solving pred problem</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span></span>
<span><span class="va">rx</span></span>
<span><span class="co">#&gt;  ── rxode2-based free-form 2-cmt ODE model ────────────────────────────────────── </span></span>
<span><span class="co">#&gt;  ── Initalization: ──  </span></span>
<span><span class="co">#&gt; Fixed Effects ($theta): </span></span>
<span><span class="co">#&gt;      ka_pop       V_pop      Cl_pop           a           b </span></span>
<span><span class="co">#&gt;  0.42699448 -0.78635157 -3.21457598  0.43327956  0.05425953 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Omega ($omega): </span></span>
<span><span class="co">#&gt;           omega_ka    omega_V   omega_Cl</span></span>
<span><span class="co">#&gt; omega_ka 0.4503145 0.00000000 0.00000000</span></span>
<span><span class="co">#&gt; omega_V  0.0000000 0.01594701 0.00000000</span></span>
<span><span class="co">#&gt; omega_Cl 0.0000000 0.00000000 0.07323701</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; States ($state or $stateDf): </span></span>
<span><span class="co">#&gt;   Compartment Number Compartment Name</span></span>
<span><span class="co">#&gt; 1                  1            depot</span></span>
<span><span class="co">#&gt; 2                  2          central</span></span>
<span><span class="co">#&gt;  ── μ-referencing ($muRefTable): ──  </span></span>
<span><span class="co">#&gt;    theta      eta level</span></span>
<span><span class="co">#&gt; 1 ka_pop omega_ka    id</span></span>
<span><span class="co">#&gt; 2  V_pop  omega_V    id</span></span>
<span><span class="co">#&gt; 3 Cl_pop omega_Cl    id</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;  ── Model (Normalized Syntax): ── </span></span>
<span><span class="co">#&gt; function() {</span></span>
<span><span class="co">#&gt;     description &lt;- "The administration is extravascular with a first order absorption (rate constant ka).\nThe PK model has one compartment (volume V) and a linear elimination (clearance Cl).\nThis has been modified so that it will run without the model library"</span></span>
<span><span class="co">#&gt;     thetaMat &lt;- lotri({</span></span>
<span><span class="co">#&gt;         ka_pop + V_pop + Cl_pop ~ c(0.09785, 0.00082606, 0.00041937, </span></span>
<span><span class="co">#&gt;             -4.2833e-05, -6.7957e-06, 1.1318e-05)</span></span>
<span><span class="co">#&gt;         a + b ~ c(0.015333, -0.0026458, 0.00056232)</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;     validation &lt;- c("ipred relative difference compared to Monolix ipred: 0.04%; 95% percentile: (0%,0.52%); rtol=0.00038", </span></span>
<span><span class="co">#&gt;         "ipred absolute difference compared to Monolix ipred: 95% percentile: (0.000362, 0.00848); atol=0.00254", </span></span>
<span><span class="co">#&gt;         "pred relative difference compared to Monolix pred: 0%; 95% percentile: (0%,0%); rtol=6.6e-07", </span></span>
<span><span class="co">#&gt;         "pred absolute difference compared to Monolix pred: 95% percentile: (1.6e-07, 1.27e-05); atol=3.66e-06", </span></span>
<span><span class="co">#&gt;         "iwres relative difference compared to Monolix iwres: 0%; 95% percentile: (0.06%,32.22%); rtol=0.0153", </span></span>
<span><span class="co">#&gt;         "iwres absolute difference compared to Monolix pred: 95% percentile: (0.000403, 0.0138); atol=0.00305")</span></span>
<span><span class="co">#&gt;     ini({</span></span>
<span><span class="co">#&gt;         ka_pop &lt;- 0.426994483535611</span></span>
<span><span class="co">#&gt;         V_pop &lt;- -0.786351566327091</span></span>
<span><span class="co">#&gt;         Cl_pop &lt;- -3.21457597916301</span></span>
<span><span class="co">#&gt;         a &lt;- c(0, 0.433279557549051)</span></span>
<span><span class="co">#&gt;         b &lt;- c(0, 0.0542595276206251)</span></span>
<span><span class="co">#&gt;         omega_ka ~ 0.450314511978718</span></span>
<span><span class="co">#&gt;         omega_V ~ 0.0159470121255372</span></span>
<span><span class="co">#&gt;         omega_Cl ~ 0.0732370098834837</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt;     model({</span></span>
<span><span class="co">#&gt;         cmt(depot)</span></span>
<span><span class="co">#&gt;         cmt(central)</span></span>
<span><span class="co">#&gt;         ka &lt;- exp(ka_pop + omega_ka)</span></span>
<span><span class="co">#&gt;         V &lt;- exp(V_pop + omega_V)</span></span>
<span><span class="co">#&gt;         Cl &lt;- exp(Cl_pop + omega_Cl)</span></span>
<span><span class="co">#&gt;         d/dt(depot) &lt;- -ka * depot</span></span>
<span><span class="co">#&gt;         d/dt(central) &lt;- +ka * depot - Cl/V * central</span></span>
<span><span class="co">#&gt;         Cc &lt;- central/V</span></span>
<span><span class="co">#&gt;         CONC &lt;- Cc</span></span>
<span><span class="co">#&gt;         CONC ~ add(a) + prop(b) + combined1()</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt; }</span></span>
<span></span>
<span><span class="co"># If you are only interseted in the parsing you can use `mlxtran`</span></span>
<span></span>
<span><span class="va">mlx</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/mlxtran.html">mlxtran</a></span><span class="op">(</span><span class="va">mlxtranFile</span><span class="op">)</span></span>
<span><span class="co">#&gt; ℹ reading run info (# obs, doses, Monolix Version, etc) from summary.txt</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span><span class="co">#&gt; ℹ reading covariance from FisherInformation/covarianceEstimatesLin.txt</span></span>
<span><span class="co">#&gt; ℹ done</span></span>
<span></span>
<span><span class="va">mlx</span></span>
<span><span class="co">#&gt; DESCRIPTION:</span></span>
<span><span class="co">#&gt; The administration is extravascular with a first order absorption (rate constant ka).</span></span>
<span><span class="co">#&gt; The PK model has one compartment (volume V) and a linear elimination (clearance Cl).</span></span>
<span><span class="co">#&gt; This has been modified so that it will run without the model library</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;DATAFILE&gt;</span></span>
<span><span class="co">#&gt; [FILEINFO]</span></span>
<span><span class="co">#&gt; ; parsed: $DATAFILE$FILEINFO$FILEINFO</span></span>
<span><span class="co">#&gt; file = 'data/theophylline_data.txt'</span></span>
<span><span class="co">#&gt; delimiter = tab</span></span>
<span><span class="co">#&gt; header = {ID, AMT, TIME, CONC, WEIGHT, SEX}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [CONTENT]</span></span>
<span><span class="co">#&gt; ; parsed: $DATAFILE$CONTENT$CONTENT</span></span>
<span><span class="co">#&gt; ID = {use=identifier}</span></span>
<span><span class="co">#&gt; TIME = {use=time}</span></span>
<span><span class="co">#&gt; AMT = {use=amount}</span></span>
<span><span class="co">#&gt; CONC = {use=observation, name=CONC, type=continuous}</span></span>
<span><span class="co">#&gt; WEIGHT = {use=covariate, type=continuous}</span></span>
<span><span class="co">#&gt; SEX = {use=covariate, type=categorical}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;MODEL&gt;</span></span>
<span><span class="co">#&gt; [INDIVIDUAL]</span></span>
<span><span class="co">#&gt; ; parsed: $MODEL$INDIVIDUAL$INDIVIDUAL</span></span>
<span><span class="co">#&gt; input = {ka_pop, omega_ka, V_pop, omega_V, Cl_pop, omega_Cl}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; DEFINITION:</span></span>
<span><span class="co">#&gt; ; parsed: $MODEL$INDIVIDUAL$DEFINITION</span></span>
<span><span class="co">#&gt; ka = {distribution=lognormal, typical=ka_pop, sd=omega_ka}</span></span>
<span><span class="co">#&gt; V = {distribution=lognormal, typical=V_pop, sd=omega_V}</span></span>
<span><span class="co">#&gt; Cl = {distribution=lognormal, typical=Cl_pop, sd=omega_Cl}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [LONGITUDINAL]</span></span>
<span><span class="co">#&gt; ; parsed: $MODEL$LONGITUDINAL$LONGITUDINAL</span></span>
<span><span class="co">#&gt; input = {a, b, ka, V, Cl}</span></span>
<span><span class="co">#&gt; file = 'oral1_1cpt_kaVCl.txt'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; DEFINITION:</span></span>
<span><span class="co">#&gt; ; parsed: $MODEL$LONGITUDINAL$DEFINITION</span></span>
<span><span class="co">#&gt; CONC = {distribution=normal, prediction=Cc, errorModel=combined1(a, b)}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; EQUATION:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ; PK model definition</span></span>
<span><span class="co">#&gt; Cc = pkmodel(ka, V, Cl)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; OUTPUT:</span></span>
<span><span class="co">#&gt; ; parsed: $MODEL$LONGITUDINAL$OUTPUT</span></span>
<span><span class="co">#&gt; output = Cc</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;FIT&gt;</span></span>
<span><span class="co">#&gt; ; parsed: $FIT$FIT</span></span>
<span><span class="co">#&gt; data = {CONC}</span></span>
<span><span class="co">#&gt; model = {CONC}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;PARAMETER&gt;</span></span>
<span><span class="co">#&gt; ; parsed: $PARAMETER$PARAMETER</span></span>
<span><span class="co">#&gt; Cl_pop = {value=0.1, method=MLE}</span></span>
<span><span class="co">#&gt; V_pop = {value=0.5, method=MLE}</span></span>
<span><span class="co">#&gt; a = {value=1, method=MLE}</span></span>
<span><span class="co">#&gt; b = {value=0.3, method=MLE}</span></span>
<span><span class="co">#&gt; ka_pop = {value=1, method=MLE}</span></span>
<span><span class="co">#&gt; omega_Cl = {value=1, method=MLE}</span></span>
<span><span class="co">#&gt; omega_V = {value=1, method=MLE}</span></span>
<span><span class="co">#&gt; omega_ka = {value=1, method=MLE}</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; &lt;MONOLIX&gt;</span></span>
<span><span class="co">#&gt; [TASKS]</span></span>
<span><span class="co">#&gt; ; parsed: $MONOLIX$TASKS$TASKS</span></span>
<span><span class="co">#&gt; populationParameters()</span></span>
<span><span class="co">#&gt; individualParameters(method = {conditionalMean, conditionalMode})</span></span>
<span><span class="co">#&gt; fim(method = Linearization)</span></span>
<span><span class="co">#&gt; logLikelihood(method = Linearization)</span></span>
<span><span class="co">#&gt; plotResult(method = {indfits, obspred, vpc, residualsscatter, residualsdistribution, parameterdistribution, covariatemodeldiagnosis, randomeffects, covariancemodeldiagnosis, saemresults})</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; [SETTINGS]</span></span>
<span><span class="co">#&gt; GLOBAL:</span></span>
<span><span class="co">#&gt; ; parsed: $MONOLIX$SETTINGS$GLOBAL</span></span>
<span><span class="co">#&gt; exportpath = 'tp'</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; ; unparsed sections:</span></span>
<span><span class="co">#&gt; ;  $MODEL$LONGITUDINAL$EQUATION</span></span>
<span></span>
<span><span class="co"># this can be converted to a list</span></span>
<span><span class="va">mlx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">as.list</a></span><span class="op">(</span><span class="va">mlx</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mlx</span><span class="op">$</span><span class="va">DATAFILE</span><span class="op">$</span><span class="va">FILEINFO</span><span class="op">$</span><span class="va">FILEINFO</span></span>
<span><span class="co">#&gt; $file</span></span>
<span><span class="co">#&gt; [1] "data/theophylline_data.txt"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $header</span></span>
<span><span class="co">#&gt; [1] "ID"     "AMT"    "TIME"   "CONC"   "WEIGHT" "SEX"   </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $delimiter</span></span>
<span><span class="co">#&gt; [1] "tab"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="translating-models-from-the-monolix-model-library">Translating models from the Monolix model library<a class="anchor" aria-label="anchor" href="#translating-models-from-the-monolix-model-library"></a>
</h2>
<p>For models using Monolix’s model library, the models may not be accessible as text files in all versions of Monolix. In the <code>mlxtran</code> files you may see something like:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>lib<span class="sc">:</span>bolus_1cpt_TlagVCl.txt</span></code></pre></div>
<p>For older versions of Monolix, the model libraries are a group of text files. You can find it by looking for a file in the Monolix library like <code>bolus_1cpt_TlagVCl.txt</code>. In this case it would be in <code>pk/bolus_1cpt_TlagVCl.txt</code>. The parent directory would be the model library. If you have access to these files (even if they are from an old version of Monolix) you can make <code>monolix2rx</code> aware of the model library by using:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># If the model library was located in ~/src/monolix/library</span></span>
<span><span class="co"># Then you would set the model library up as follows:</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>monolix2rx.library<span class="op">=</span><span class="st">"~/src/monolix/library/"</span><span class="op">)</span></span></code></pre></div>
<p>In Unix, this can be a symbolic link to whatever model library you would like to use.</p>
<p>You can check to see if it works by trying to translate the model file to <code>rxode2</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/monolix2rx.html">monolix2rx</a></span><span class="op">(</span><span class="st">"lib:bolus_1cpt_TlagVCl.txt"</span><span class="op">)</span></span>
<span><span class="co">#&gt; using C compiler: ‘gcc (Ubuntu 11.4.0-1ubuntu1~22.04) 11.4.0’</span></span>
<span><span class="co">#&gt; In file included from /usr/share/R/include/R.h:71,</span></span>
<span><span class="co">#&gt;                  from /home/matt/R/x86_64-pc-linux-gnu-library/4.4/rxode2parse/include/rxode2parse.h:33,</span></span>
<span><span class="co">#&gt;                  from /home/matt/R/x86_64-pc-linux-gnu-library/4.4/rxode2/include/rxode2.h:9,</span></span>
<span><span class="co">#&gt;                  from /home/matt/R/x86_64-pc-linux-gnu-library/4.4/rxode2parse/include/rxode2_model_shared.h:3,</span></span>
<span><span class="co">#&gt;                  from rx_006529352ac819b40b322c71010f90c5_.c:117:</span></span>
<span><span class="co">#&gt; /usr/share/R/include/R_ext/Complex.h:80:6: warning: ISO C99 doesn’t support unnamed structs/unions [-Wpedantic]</span></span>
<span><span class="co">#&gt;    80 |     };</span></span>
<span><span class="co">#&gt;       |      ^</span></span>
<span><span class="co">#&gt; ℹ cannot find individual parameter estimates</span></span>
<span><span class="co">#&gt;  ── rxode2-based free-form 1-cmt ODE model ────────────────────────────────────── </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; States ($state or $stateDf): </span></span>
<span><span class="co">#&gt;   Compartment Number Compartment Name</span></span>
<span><span class="co">#&gt; 1                  1          central</span></span>
<span><span class="co">#&gt;  ── Model (Normalized Syntax): ── </span></span>
<span><span class="co">#&gt; function() {</span></span>
<span><span class="co">#&gt;     description &lt;- "The administration is via a bolus with a lag time (Tlag).\nThe PK model has one compartment (volume V) and a linear elimination (clearance Cl)."</span></span>
<span><span class="co">#&gt;     model({</span></span>
<span><span class="co">#&gt;         cmt(central)</span></span>
<span><span class="co">#&gt;         d/dt(central) &lt;- -Cl/V * central</span></span>
<span><span class="co">#&gt;         alag(central) &lt;- Tlag</span></span>
<span><span class="co">#&gt;         Cc &lt;- central/V</span></span>
<span><span class="co">#&gt;     })</span></span>
<span><span class="co">#&gt; }</span></span></code></pre></div>
<p>If you computer is setup correctly (like above) you will see the translated model. Note since it isn’t a <code>mlxtran</code> file the relationship between population parameters, between subject variability etc and initial parameter estimates are not in the model.</p>
<p>If the model library is not setup correctly you will see or cannot be found in an old model library you get:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/try.html" class="external-link">try</a></span><span class="op">(</span><span class="fu"><a href="reference/monolix2rx.html">monolix2rx</a></span><span class="op">(</span><span class="st">"lib:notThere.txt"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Warning in .mlxtranLib(file): while options('monolix2rx.library') is set, could not find model file 'lib:notThere.txt'</span></span>
<span><span class="co">#&gt; please save the model to translate</span></span>
<span><span class="co">#&gt; Error : could not find the model file</span></span></code></pre></div>
<p>In newer versions of Monolix, the model library was turned into a binary database that is accessed by the GUI. To me there are advantages of this:</p>
<ul>
<li><p>A binary database would be much faster in loading models</p></li>
<li><p>With a model library, you don’t have to put common model files all over the place (saving space on your system)</p></li>
<li>
<p>It would make their hard work on the excellent model library harder to take and put into another system (They have at least 31,558 models).</p>
<ul>
<li><p>While this now allows a complete import of the Monolix library, I believe our <code>nlmixr2lib</code> should only be built from imported from a open-source library or be created on its own (as we are doing in <code>nlmixr2lib</code>).</p></li>
<li><p>Please do not request direct translations of models from Monolix to our library <code>nlmixr2lib</code>; these requests will be rejected.</p></li>
</ul>
</li>
</ul>
<p>If you want the model library as text files, you may be able to reach out to Lixoft and ask if they will provide them to you (or point to the last version that used these text files.)</p>
<p>My biggest concern with this a approach is submitting Monolix models from the model library to regulatory bodies. For the regulators to be able to truly see the models they have to have a working copy Monolix. If they do not, the model is a black box.</p>
<p>For that reason, I believe best practice when submitting to a regulatory body is to make the model available by making some change to the model and saving it to a final location. That way the regulators can see the model.</p>
<p>This approach also allows the model to be translated to <code>rxode2</code>.</p>
</div>
</div>
<div class="section level1">
<h1 id="note-on-testing">Note on testing<a class="anchor" aria-label="anchor" href="#note-on-testing"></a>
</h1>
<p>The tests in this package include testing the <code>Monolix</code> demo files, the <code>Monolix</code> library files (if available), and Monolix validation suite.</p>
<p>Since these are a part of Monolix itself, they are not included in this package. You can setup <code>monolix2rx</code> to run tests on all of these files as well by setting up some options:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># setup monolix library (and will test that the parsing and translation are as expected)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>monolix2rx.library<span class="op">=</span><span class="st">"~/src/monolix/library/"</span><span class="op">)</span></span>
<span><span class="co"># setup monolix demos to be tested</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>monolix2rx.demo<span class="op">=</span><span class="st">"~/src/monolix/demos/"</span><span class="op">)</span></span></code></pre></div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing monolix2rx</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Matthew Fidler <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-8538-6691" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/nlmixr2/monolix2rx/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/nlmixr2/monolix2rx/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://app.codecov.io/gh/nlmixr2/monolix2rx?branch=main" class="external-link"><img src="https://codecov.io/gh/nlmixr2/monolix2rx/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://cran.r-project.org/package=monolix2rx" class="external-link"><img src="http://www.r-pkg.org/badges/version/monolix2rx" alt="CRAN version"></a></li>
<li><a href="https://cran.r-project.org/package=monolix2rx" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/grand-total/monolix2rx" alt="CRAN total downloads"></a></li>
<li><a href="https://cran.r-project.org/package=monolix2rx" class="external-link"><img src="https://cranlogs.r-pkg.org/badges/monolix2rx" alt="CRAN total downloads"></a></li>
<li><a href="https://www.codefactor.io/repository/github/nlmixr2/monolix2rx" class="external-link"><img src="https://www.codefactor.io/repository/github/nlmixr2/monolix2rx/badge" alt="CodeFactor"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Matthew Fidler.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
